<div class="container py-4">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h3 class="mb-1">ইউজার ম্যানেজমেন্ট</h3>
      <p class="text-muted mb-0">সকল অ্যাডমিন ইউজার ও তাদের রোল পরিচালনা করুন</p>
    </div>
    <a href="/admin/users/create" class="btn btn-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg me-1" viewBox="0 0 16 16">
        <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
      </svg>
      নতুন ইউজার
    </a>
  </div>

  <!-- Stats Cards -->
  <div class="row mb-4">
    <div class="col-md-3 mb-2">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h4 class="mb-1 text-primary"><%= users.length %></h4>
          <small class="text-muted">মোট ইউজার</small>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-2">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h4 class="mb-1 text-success"><%= users.filter(u => u.status === 'Active').length %></h4>
          <small class="text-muted">অ্যাক্টিভ</small>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-2">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h4 class="mb-1 text-danger"><%= users.filter(u => u.status === 'Inactive').length %></h4>
          <small class="text-muted">ইন্যাক্টিভ</small>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-2">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center">
          <h4 class="mb-1 text-warning"><%= users.filter(u => u.role === 'Super Admin').length %></h4>
          <small class="text-muted">সুপার অ্যাডমিন</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="card border-0 shadow-sm">
    <div class="card-body p-0">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th style="width: 50px;">#</th>
            <th>নাম</th>
            <th>ইমেইল</th>
            <th>ইউজারনেম</th>
            <th>রোল</th>
            <th>স্ট্যাটাস</th>
            <th>তারিখ</th>
            <th style="width: 180px;">অ্যাকশন</th>
          </tr>
        </thead>
        <tbody>
          <% if (users && users.length > 0) { %>
            <% users.forEach((user, index) => { %>
              <tr>
                <td><%= index + 1 %></td>
                <td>
                  <div class="d-flex align-items-center">
                    <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px; font-size: 14px; font-weight: 600;">
                      <%= user.name ? user.name.charAt(0).toUpperCase() : 'U' %>
                    </div>
                    <span class="fw-semibold"><%= user.name %></span>
                  </div>
                </td>
                <td><%= user.email %></td>
                <td><code><%= user.username %></code></td>
                <td>
                  <% if (user.role === 'Super Admin') { %>
                    <span class="badge bg-danger"><%= user.role %></span>
                  <% } else if (user.role === 'Admin') { %>
                    <span class="badge bg-primary"><%= user.role %></span>
                  <% } else { %>
                    <span class="badge bg-info"><%= user.role %></span>
                  <% } %>
                </td>
                <td>
                  <% if (user.status === 'Active') { %>
                    <span class="badge bg-success">
                      <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-circle-fill me-1" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="8"/>
                      </svg>
                      Active
                    </span>
                  <% } else { %>
                    <span class="badge bg-secondary">
                      <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-circle-fill me-1" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="8"/>
                      </svg>
                      Inactive
                    </span>
                  <% } %>
                </td>
                <td><%= user.createdAt ? new Date(user.createdAt).toLocaleDateString('bn-BD') : 'N/A' %></td>
                <td>
                  <a href="/admin/users/edit/<%= user.id %>" class="btn btn-sm btn-outline-primary me-1" title="সম্পাদনা">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                      <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                      <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                    </svg>
                  </a>
                  <form action="/admin/users/delete/<%= user.id %>" method="POST" class="d-inline" onsubmit="return confirm('আপনি কি এই ইউজার মুছতে চান?');">
                    <button type="submit" class="btn btn-sm btn-outline-danger" title="মুছুন">
                      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                        <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
                      </svg>
                    </button>
                  </form>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="8" class="text-center py-4 text-muted">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-people mb-2 d-block mx-auto opacity-50" viewBox="0 0 16 16">
                  <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1zm-7.978-1L7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002-.014.002zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0M6.936 9.28a6 6 0 0 0-1.23-.247A7 7 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216A2.24 2.24 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816M4.92 10A5.5 5.5 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0m3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4"/>
                </svg>
                কোন ইউজার পাওয়া যায়নি।
              </td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
